var affiliateLinks = [
  "https://www.amazon.co.uk/gp/product/B07FLGP9JL/ref=as_li_tl?ie=UTF8&camp=1634&creative=6738&creativeASIN=B07FLGP9JL&linkCode=as2&tag=clickaton-21&linkId=589873b01ce201fa467fbf116de1f915",
  "https://www.amazon.co.uk/Amber-Fight-Gear-Training-Punching/dp/B07GTH8DJ7/ref=as_li_ss_il?keywords=punching+bags&qid=1554659352&refinements=p_72:419153031,p_76:419158031&rnid=419157031&rps=1&s=gateway&sr=8-4-spons&psc=1&linkCode=li1&tag=clickaton-21&linkId=b81cbf7c3f72f77099db707a89a9869c&language=en_GB",
  "https://www.amazon.co.uk/Relaxdays-Punching-Children-Adjustable-black-red/dp/B0754MSNGM/ref=as_li_ss_il?keywords=punching+bags&qid=1554659352&refinements=p_72:419153031,p_76:419158031&rnid=419157031&rps=1&s=gateway&sr=8-13&linkCode=li1&tag=clickaton-21&linkId=ffd576d510138ffdc53a56e61375825c&language=en_GB",
  "https://www.amazon.co.uk/BodyRip-Standing-Punch-Boxing-Exercise/dp/B01G3TDSVO/ref=as_li_ss_il?keywords=punching+bags&qid=1554659352&refinements=p_72:419153031,p_76:419158031&rnid=419157031&rps=1&s=gateway&sr=8-10&linkCode=li1&tag=clickaton-21&linkId=81af0417fea2626c0e32ae7fbedce84f&language=en_GB",
  "https://www.amazon.co.uk/Umi-Essentials-Door-Upper-Workout/dp/B07G58NNWS/ref=as_li_ss_il?crid=1KL0BZ9VU9IZW&keywords=chin+up+bar&qid=1554659528&refinements=p_72:419153031,p_76:419158031&rnid=419157031&rps=1&s=gateway&sprefix=chin,aps,134&sr=8-1-spons&psc=1&linkCode=li1&tag=clickaton-21&linkId=c1c42f3e9dc8bd1d38a80139179f2933&language=en_GB",
  "https://www.amazon.co.uk/Pull-Up-Frames-without-Drilling-Workout/dp/B076F74QF2/ref=as_li_ss_il?crid=1W3OCO8NBH4G7&keywords=chin+up+bar&qid=1554659565&s=gateway&sprefix=chin+up,aps,133&sr=8-2-spons&psc=1&linkCode=li1&tag=clickaton-21&linkId=e9dc503c2c14f5ed67a9bc73b6f49df5&language=en_GB",
  "https://www.amazon.co.uk/Rocktape-Kinesiology-Athletes-Resistant-Recovery/dp/B004GTJAMK/ref=as_li_ss_il?keywords=stretching+aids&qid=1554659606&refinements=p_76:419158031&rnid=419157031&rps=1&s=gateway&sr=8-20&linkCode=li1&tag=clickaton-21&linkId=c82d7ce5626cfdea12e247c0eed2771d&language=en_GB",
  "https://www.amazon.co.uk/Koolpak-Original-Instant-Cold-Packs/dp/B004REYQC8/ref=as_li_ss_il?keywords=ice+packs&qid=1554659723&refinements=p_76:419158031,p_72:419153031&rnid=419152031&rps=1&s=gateway&sr=8-5&linkCode=li1&tag=clickaton-21&linkId=ab9ca03d6402a932d52144440ac71ce8&language=en_GB",
  "https://www.amazon.co.uk/Super-Flexible-Gel-Pack-Multi-purpose/dp/B00G8JT6RK/ref=as_li_ss_il?keywords=ice+packs&qid=1554659723&refinements=p_76:419158031,p_72:419153031&rnid=419152031&rps=1&s=gateway&sr=8-12&linkCode=li1&tag=clickaton-21&linkId=54e63d711b1d030752fa0c159bd6bc09&language=en_GB",
  "https://www.amazon.co.uk/Tatami-Meiyo-Large-Gym-Bag/dp/B01M6YJJGA/ref=as_li_ss_il?keywords=martial+arts+kit+bag&qid=1554659819&rnid=419152031&s=gateway&sr=8-4&linkCode=li1&tag=clickaton-21&linkId=776718a6af141e7d0a16453968744b49&language=en_GB",
  "https://www.amazon.co.uk/IGNPION-Taekwondo-Kickboxing-Practice-Equipment/dp/B077YCJP7C/ref=as_li_ss_il?keywords=taekwondo+sparring+pads&qid=1554660336&s=gateway&sr=8-4&linkCode=li1&tag=clickaton-21&linkId=de896c46aa413130d59f3cbf288376da&language=en_GB"
];
var imageSrcs = [
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=GB&ASIN=B07FLGP9JL&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL110_&tag=clickaton-21",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B07GTH8DJ7&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B0754MSNGM&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B01G3TDSVO&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B07G58NNWS&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B076F74QF2&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B004GTJAMK&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B004REYQC8&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B00G8JT6RK&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B01M6YJJGA&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB",
  "http://ws-eu.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B077YCJP7C&Format=_SL110_&ID=AsinImage&MarketPlace=GB&ServiceVersion=20070822&WS=1&tag=clickaton-21&language=en_GB"
];
var pixels = [
  "http://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&l=am2&o=2&a=B07FLGP9JL",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B07GTH8DJ7",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B0754MSNGM",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B01G3TDSVO",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B07G58NNWS",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B076F74QF2",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B004GTJAMK",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B004REYQC8",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B00G8JT6RK",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B01M6YJJGA",
  "https://ir-uk.amazon-adsystem.com/e/ir?t=clickaton-21&language=en_GB&l=li1&o=2&a=B077YCJP7C"
];
function createSlideData(affiliateLinks, imageSrcs, pixels) {
  var slideShow = [];
  for (i = 0, length = pixels.length; i < length; i++) {
    var slide = {};
    slide.pixel = pixels[i];
    slide.affiliateLink = affiliateLinks[i];
    slide.imageSrc = imageSrcs[i];
    slideShow.push(slide);
  }
  return slideShow;
}

function createAffiliateSlide(slideData) {
  var affiliateLink = slideData.affiliateLink;
  var pixel = slideData.pixel;
  var slide = $("<div></div>");
  var anchorWrapper = $('<a class="product" target="_blank">');
  anchorWrapper.attr("href", affiliateLink);
  var image = $('<img border="0"/>');
  image.attr("src", slideData.imageSrc);
  var pixel = $(
    '<img width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;"/>'
  );
  pixel.attr("src", slideData.pixel);
  var button = $(
    '<div class="buy-button"><p>BUY NOW ON</p><img width="60" src="images/amazon_logo.png" /></div>'
  );
  anchorWrapper.append(image, pixel, button);
  slide.append(anchorWrapper);
  return slide;
}

function createAndAppendSlideShow(slides, callback) {
  var numberOfSlides = slides.length;
  var count = 0;
  slides.forEach(function(slideData) {
    var slide = createAffiliateSlide(slideData);
    $(".shop-slide-show").append(slide);
    count++;
    if (count === numberOfSlides) {
      callback();
    }
  });
}

function slickSlideShowInit() {
  $(".shop-slide-show").slick({
    slidesToShow: 4,
    slidesToScroll: 1,
    autoplay: true,
    autoplaySpeed: 2000
  });
}

$(document).ready(function() {
  var slideData = createSlideData(affiliateLinks, imageSrcs, pixels);
  createAndAppendSlideShow(slideData, slickSlideShowInit);
});
